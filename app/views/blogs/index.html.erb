<div class="container">
  <h1>Blogs</h1>
  <%= search_form_for @q, url: search_blogs_path, html: { method: :post } do |f| %>
  <%= f.search_field :title_or_body_cont %>
  <%= f.submit "Search" %>
<% end %>
  <%= link_to 'Write a blog', new_blog_path(current_user), :class => "btn btn-primary" %>
  <br><br>
<table class="table table-striped">
  <thead class="thead-dark">
    <tr>
      <th><%= sort_link @q, :user_id, "User" %></th>
      <th><%= sort_link @q, :title, "Title" %></th>
      <th><%= sort_link @q, :body, "Body"%></th>
      <th><%= sort_link @q, :tags, "Tags"%></th>
      <th><%= sort_link @q, :created_at, "Date" %></th>
    </tr>
  </thead>
  <tbody>
    <% @blogs.reverse_each do |b| %>
    <tr>
      <td><a href="/users/<%= b.user_id %>"><%= image_tag b.user.avatar.url(:thumb), class: "thumb-index" %>
      <%= b.user.username %></a></td>
      <td><%= link_to b.title, blog_path(b) %></td>
      <td><%= b.body.html_safe %></td>
      <td><%= link_to b.tags.first, tag_path(b.tags.first) %></td>
      <td><%= b.created_at.localtime.strftime("%B %d, %Y") %></td>
    </tr>
    <% end %>
  </tbody>
</table>
</div>
